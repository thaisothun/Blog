{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link href='https://cdn.boxicons.com/3.0.3/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <title>Home</title>
    <style>
        *{
            margin: 0px;
            padding: 0px;
            box-sizing: border-box;
            font-family: "Open Sans", sans-serif;
            font-optical-sizing: auto;       
        }
        
        .navbar ul{
            width: 100%;
            background-color:  rgba(39, 39, 49, 0.973);
            list-style-type: none;
            overflow: hidden;                
        }

        .navbar a{
            color: rgb(255, 255, 255);
            text-decoration: none;
            background-color: rgba(39, 39, 49, 0.973);
            display: block;
            text-align: center;
            padding: 15px;
            margin: 0px;
            transition: 0.3s ease;
        }

        .navbar a:hover{
            background-color: #A675A1;
        }
        
        .navbar li{
            float:left;    
        }

        .navbar{               
        align-content: center;
        position: relative;
        margin-top: 0px;
            
        }
        
        .navbar p{
            color: white;
            text-align: right;
            margin: 15px;
            display: inline-flex;
            
            
        }
        
        #logout {
            all: revert;
            color: rgb(255, 255, 255);
        }
        
        .header {
            position: fixed;
            width: 100%;
            z-index: 2   
        }
        .search a:hover{
            background-color: aqua;
            width: 100px;
       
        }

        .post {
            animation: fade-in;
            animation-timeline: view();
            animation-range-start: 100px;
            animation-range-start: 600px;
           
        }
        
       
        
        .slice {
            width: 1200px; 
            height: 300px; 
            display: flex; 
            gap: 30px; 
            align-items: center;
            overflow-x: auto;
            scroll-behavior: smooth;
            scroll-snap-type: x mandatory;
            anchor-name: --slice;
            scroll-marker-group: after;
        
        }
            
        .slice::scroll-marker-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            position: absolute;
            transform: translateY(80px);
        }
        .card::scroll-marker {
            content: '';
            width: 10px;
            height: 10px;
            background-color: aliceblue;
            border-radius: 50%;
            transition: .3s ease;
        }
        .card::scroll-marker:target-current {
            background-color: #A675A1;
            scale: 1.5;
        }
        .slice::-webkit-scrollbar {
            display: none;
                   
        }

        .slice::scroll-button(right){
            all: unset;
            content: ">";
            font-size: 50px;
            color: white;
            position: fixed;
            cursor: pointer;
            position-anchor: --slice;
            position-area: right center;
            transform: translateX(-50px);
            transition: .3s ease;
           

        }
        .slice::scroll-button(left){
            all: unset;
            content: "<";
            font-size: 50px;
            color: white;
            position: fixed;
            cursor: pointer;
            position-anchor: --slice;
            position-area: left center;
            transform: translateX(50px);
            transition: .3s ease;
        }
        .slice.slice::scroll-button(left):hover{
            transform: translateX(45px);
        }
        .slice.slice::scroll-button(right):hover{
            transform: translateX(-45px);
        }

        .slice::scroll-button(right):disabled{
            opacity: 0.5;
            cursor: auto;
        }
        
        .slice::scroll-button(left):disabled{
            opacity: 0.5;
            cursor: auto;
        }
        
        .card {
            display: flex;
            scroll-snap-align:start;
            flex: 0 0 1200px;
            height: 250px;
         
        }
        .sidebar{
            position: fixed;
            width: 250px; 
            height: 370px; 
            background-color: rgba(39, 39, 49, 0.973);
            right: -300px; 
            top:360px; 
            z-index: 999; 
            padding: 20px;
            transition: 0.3s ease-in;
        }
        
        #sidebar-active-button{
            position: fixed;
            transform: translateY(-40px);
            cursor: pointer;
            right: 0px;
            transition: 0.3s ease;
        }    
        
        .sidebar ul {
            list-style-type: none;
        }        
        
        .sidebar li {
            width: 100%;
            
            
        }

        .sidebar a {
            text-decoration: none;
            color: rgb(255, 255, 255);
            text-decoration: none;
            background-color:rgba(39, 39, 49, 0.973);
            display: block;
            padding: 10px;
            margin: 0px;
            transition: 0.3s ease;
        }
        .sidebar a:hover{
            background-color:#A675A1;
            
        }
        #sidebar-active:checked ~ .sidebar {
            
            right: 0px;
        }

        #sidebar-active:checked ~ #sidebar-active-button{
            transform: translateY(-48px) rotate(-90deg);
            cursor: pointer;
            
        }

        #sidebar-active-button svg:hover {
            fill: #A675A1;
        }
        .post p{
            padding: 5px;
            margin: 10px;
            width: 80%;
            display: block;
        }

        .container-dropdown{
           pointer-events: none;
           opacity: 0;
           transform: translateY(15px); 
           transition: 0.3s ease;      
        }
        
        #dropdown:hover .container-dropdown{
            pointer-events:auto;
            opacity: 1;
            transform: translateY(0px);
                    
        }

    </style>
</head>

<body>
    <div class="header">
        <div class="" style="width: 100%; height: 300px; background-color: rgb(255, 255, 255); display: flex; align-items: center; justify-content: center;">
            <div class="slice">    
                    {% for post in most_views %}
                    <div class="card">    
                        <a href="{% url 'detail-content' pk=post.pk %}" style="display: flex; width: 100%; text-decoration: none;"><img src="{{post.image1.url}}" style="width:100%; height:auto; object-fit: cover;">
                        <h2 style="background-color: #A675A1; width: 30%; padding: 20px; text-transform: capitalize; color: white; ">{{post.title}}</h2></a>             
                    </div>
                    {% endfor %}
                    
            </div>
                
            
        </div>
        <nav class="navbar">
            <ul>
                <li><a href="{% url 'home' %}">Home</a> </li>
                <li id="dropdown"><a href="">Topics</a> 
                    
                    <ul class="container-dropdown" style="display: flex; position: absolute; flex-direction: column; width: 250px;">                        
                        <div style="background-color: white; height: 5px;"></div>
                        {% for x in topics %}
                        <li><a style="text-align: left;" href="{% url 'topic' topic=x %}">{{x}}</a></li>
                        {% endfor %}
                    </ul>
                <li><a href="{% url 'register'%}">Registration</a> </li>
                <li><a href="">Contact Us</a> </li>
                {% if user.is_authenticated %}
                <li><a href="">Logout</a> </li>
                {% else %}
                <li><a href="{% url 'login' %}">Login</a> </li>
                {% endif %}
            </ul>    
        </nav>
        <div class="search" style="position: absolute; display: flex; gap: 10px; transform:  translateY(-35px); right: 0px;">
            <p style="display:block; color: white; transform: translateY(0px); text-transform: uppercase;">WELCOME, {{ user }} <small>({{profile.membership}})</small></p>
            <form action="{% url 'search-result' %}" method="GET">
                
                <input type="text" name="search" placeholder="Search" required value="{{ request.GET.search }}" style="padding: 10px; transform: translateY(-17px);">       
                <button style=" transform: translateX(-43px) translateY(-8px); background-color: rgba(39, 39, 49, 0.973); padding-top: 5px;padding-left: 5px; height: 35px; width: 35px; text-decoration: none;"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0 0 50 50" style="fill:white">
                <path d="M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z"></path>
                </svg></button>
            </form> 
        </div>
        {% if user.is_authenticated %}
        <nav>
            <input type="checkbox" id="sidebar-active" style="display: none;">
            <label for="sidebar-active" id="sidebar-active-button"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#e3e3e3"><path d="M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"/></svg></label>
            <div class="sidebar"> 
                {% if profile.image_profile %}
                <img src="{{profile.image_profile.url}}" style="width: 100px; height: 100px; border-radius: 50%; display: block; margin-left: auto; margin-right: auto;  object-fit: cover;">
                {% else %}
                <img src="{% static 'img/unknow_profile.jpg' %}" style="width: 100px; height: 100px; border-radius: 50%; display: block; margin-left: auto; margin-right: auto;">
                {% endif %}
                <p style="color: white; display: block; text-align: center; margin: 10px; text-transform: capitalize;">{{profile.short_message}}</p>
                <hr>
                <h2 style="color: white; display: block; text-align: center; margin: 10px; text-transform: uppercase;"> {{profile.user}} </h2>
                <hr>
                    <ul>
                        <a href="{% url 'profile_detail' user=user %}"><li>VIEW PROFILE</li></a>
                        <a href="{% url 'change_password' user=user %}"><li>CHANGE PASSWORD</li></a>
                        <a href="{% url 'profile_update' user=user %}"><li>SETTING</li></a>
                    </ul>     
            </div>
        </nav>
        {% else %}
        {% endif %}
    </div>
    
        <div class="post" style="display:flex; position: relative; top: 350px;">
            
            <article style="width: 75%; margin-left: 200px; padding: 30px;">
                <div class="post" style="width: 1000px; border: 1px solid  rgba(39, 39, 49, 0.973); padding: 80px; height: 700px; ">
                    {% if profile.image_profile%}
                    <img src="{{profile.image_profile.url}}" style=" width:150px; height:150px; border-radius:50% ">
                    {% else %}
                    <img src="{% static 'img/unknow_profile.jpg' %}" style=" width:150px; height:150px; border-radius:50% ">
                    {% endif %}
                    <p >{{profile.short_message}}</p>
                    <br>
                    <hr>
                    <h2> Username : <span style="text-transform: uppercase;"> {{user}} </span></h2>
                    <div style="display: grid; grid-template-columns: 30% auto; padding-left: 30px; margin: 10px;">
                        <div class="cloum1">
                            <p style="text-transform: capitalize;">First Name</p>
                            <p style="text-transform: capitalize;">Last Name</p>
                            <p>Gender</p>
                            <p>Date of Brith</p>
                            <p>Email Adress</p>
                            <p>Phone Number</p>
                            <p>Address</p>
                        </div>
                        <div class="cloum2">
                            <p style="text-transform: capitalize;">: {{current_user.first_name}}</p>
                            <p style="text-transform: capitalize;">: {{current_user.last_name}}</p>
                            <p>: {{profile.gender}}</p>
                            <p>: {{profile.date_of_brith|date:"M d, Y"}}</p>
                            <p>: {{current_user.email}}</p>
                            <p>: {{profile.phone_number}}</p>
                            <p>: {{profile.address}}</p>

                        </div>
                    </div> 
                    
                </div>
                   
            </article>
            <aside style="width: 25%; padding: 20px; float: right; height: auto; min-height: 550px; margin-top: 20px;">
                <div>
                    <h3>Recent Posts</h3>
                    <hr>
                    {% for post in recent_post %}
                    <dive class="recent" style="width: 100%; height: 300px; border: 1px solid  rgba(39, 39, 49, 0.973); display: block; margin-top: 20px; margin-bottom: 20px;">
                        <img src="{{post.image1.url}}" style="width:100%; height:200px; object-fit: cover;">
                        <h4 style="padding-left: 20px; padding-right: 20px;"><a href="{% url 'detail-content' pk=post.pk %}">{{post.title}}</a></h4>
                        <hr style="width: 90%; margin-left: 20px;">
                        <div class="like" style="display: flex; justify-content: space-between; padding: 10px;" >
                            <small><svg style="width: 10px;" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 107.68" style="enable-background:new 0 0 122.88 107.68" xml:space="preserve"><g><path d="M61.43,13.53C66.76,7.51,72.8,3.69,78.96,1.69c6.48-2.1,13.07-2.15,19.09-0.6c6.05,1.55,11.52,4.72,15.74,9.03 c5.58,5.7,9.09,13.36,9.09,22.02c0,13.7-6.6,26.75-17.42,39.37c-10.14,11.83-24.05,23.35-39.61,34.73 c-2.58,1.89-5.98,1.88-8.5,0.22l0,0.01l-0.03-0.02l0,0.01l-0.02-0.01l-0.21-0.15c-4.46-2.92-8.75-5.91-12.8-8.94 c-4.05-3.03-8.01-6.22-11.83-9.56C12.58,70.42,0,51.4,0,32.13c0-8.8,3.44-16.44,8.93-22.08c4.25-4.37,9.73-7.51,15.79-9.03V1.02 c5.99-1.5,12.57-1.4,19.05,0.69C49.99,3.71,56.09,7.54,61.43,13.53L61.43,13.53L61.43,13.53z M83.51,15.87 C78.02,17.65,72.51,22.02,68,29.78c-0.63,1.19-1.6,2.21-2.85,2.93c-3.56,2.05-8.11,0.82-10.15-2.74 c-4.5-7.82-10.14-12.27-15.78-14.08c-3.71-1.19-7.46-1.25-10.88-0.4l0,0l-0.02,0c-3.35,0.83-6.37,2.56-8.7,4.95 c-2.87,2.95-4.67,7-4.67,11.7c0,14.53,10.59,29.82,27.3,44.43c3.28,2.87,6.95,5.82,10.95,8.81c2.61,1.96,5.35,3.92,8.04,5.74 c13.03-9.76,24.53-19.53,32.9-29.3c8.58-10,13.8-19.92,13.8-29.68c0-4.55-1.84-8.58-4.76-11.57c-2.38-2.42-5.43-4.2-8.8-5.06 C90.98,14.63,87.23,14.67,83.51,15.87L83.51,15.87L83.51,15.87z"/></g></svg> {{post.likes.count}} </small>
                            <small>Views {{post.views}}</small>
                        </div>  
                    </dive>
                    {% endfor %}
                </div>
                <div class="topics"> 
                        <h3> Topics </h3>
                        <hr>
                        <br>
                        <ol class="list-unstyled" style="list-style-type: none;">
                        {% for x in topics %}
                        <li>
                        <!-- You might need a specific URL pattern to link to individual month archives -->
                        <a href="{% url 'topic' topic=x %}" style="text-decoration: none;"> {{x}} - {{x.post_count}} posts</a>
                        </li>
                        {% endfor %}
                        </ol>
                    </div>
                    <br>
                    <div class="archives"> 
                        <h3> Archives </h3>
                        <hr>
                        <br>
                        <ol class="list-unstyled" style="list-style-type: none;">
                        {% for month in converted_list %}
                        <li>
                        <!-- You might need a specific URL pattern to link to individual month archives -->
                        <a href="{% url 'archive' year=month.year month=month.month %}" style="text-decoration: none;">{{ month.year }} {{ month.month_name}} - {{ month.count }} posts</a>
                        </li>
                        {% endfor %}
                        </ol>    
                    </div>
            </aside>               
        </div>
    
      

</body>

<footer style="background-color:  rgba(39, 39, 49, 0.973); color: white; height: 100px; width: 100%; position: relative; margin-top: 400px; text-align: center; justify-items: center; ">
    <br>
    <p>Blog Post</p>
    <p>&copy; 2025 Luna Fashion Store. All Rights Reserved.</p>
</footer>

</html>